#!/bin/bash
if [[ ${0} != "deploy/bootstrap_dev" ]]; then
    echo "only call this from within the source root of a template project"
    exit 1;
fi;

mkdir media static

virtualenv --distribute --no-site-packages env || virtualenv --no-site-packages env
source env/bin/activate
pip install -r deploy/requirements.txt

touch projecttemplate/settings/local.py

SECRET_KEY=$(python -c 'from random import choice;print "".join([choice("abcdefghijklmnopqrstuvwxyz0123456789%^&*(-_=+)") for i in range(50)])')
sed -i '' -e "s/SECRET_KEY = .*/SECRET_KEY = $SECRET_KEY" projecttemplate/settings/base.py
