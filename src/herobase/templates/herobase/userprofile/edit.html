{% extends "herobase/layout/base.html" %}
{% load crispy_forms_tags i18n static %}

{% block javascript %}

    <script type="text/javascript" src="{% get_static_prefix %}select2-2.0/select2.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var avatar_thumbnails_tiny = {
            {% for id, image in request.user.get_profile.avatar_thumbnails_tiny %}
                {{ id }}: "{{ image|escapejs }}"{% if not forloop.last %},{% endif %}
            {% endfor %}
            };
            var avatar_thumbnails = {
            {% for id, image in request.user.get_profile.avatar_thumbnails %}
                {{ id }}: "{{ image|escapejs }}"{% if not forloop.last %},{% endif %}
            {% endfor %}
            };
            function formatResult(hero_class) {
                if(hero_class.id) {
                    return "<img src='" + avatar_thumbnails[hero_class.id] + "'/> " + hero_class.text;
                } else {
                    return hero_class.text
                }
            }
            function formatSelection(hero_class) {
                if(hero_class.id) {
                    return "<img src='" + avatar_thumbnails_tiny[hero_class.id] + "'/> " + hero_class.text;
                } else {
                    return hero_class.text
                }
            }
            $("#id_hero_class").select2({
                formatResult: formatResult,
                minimumResultsForSearch: 10,
                formatSelection: formatSelection
            });
        });
    </script>
    {{ form.media }}
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{% get_static_prefix %}select2-2.0/select2.css"/>
    <style type="text/css">
        .map img{max-width:none}
    </style>
{% endblock %}

{% block page_title %}
    <h1>{% trans "Profile" %}</h1>
{% endblock %}

{% block submenu %}
    {% include "herobase/userprofile/submenu.inc.html" %}
{% endblock %}

{% block content %}
   {% include "herobase/userprofile/crispy_box.inc.html" %}
{% endblock %}





