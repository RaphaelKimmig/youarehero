{% extends "herobase/layout/box.html" %}
{% load i18n hero_actions hero_message %}

{% block content %}
    <h2>{% trans "Participants" %}</h2>
    <ul class="grid ">
        {% for adventure in quest.adventures.all %}
            <li class="span1-5">
                <h4>{{ adventure.user.username }}</h4>

                <div class="inner-box box-80">

                    {% if not adventure.canceled and not adventure.accepted and not adventure.rejected %}
                        <form action="{% url owner-update-hero quest.pk adventure.user.pk %}" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="reject">
                            <button class="box-btn-top" type="submit" name="action_btn" class="btn btn-mini" value="{% trans "Reject" %}">
                                <i class="icon-yah-delete icon-30"></i></button>
                        </form>
                    {% endif %}

                    <img src="http://placehold.it/80x80" alt=""/>

                    {% if not adventure.canceled and not adventure.accepted and not adventure.rejected %}
                        <form action="{% url owner-update-hero quest.pk adventure.user.pk %}" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="accept">
                            <button class="box-btn-bottom" type="submit" name="action_btn" class="btn btn-mini" value="{% trans "Accept" %}">
                                <i class="icon-yah-ok icon-40"></i></button>
                        </form>
                        {% message_user adventure.user %}
                    {% else %}
                        {{ adventure.get_state_display }}
                    {% endif %}
                </div>
            </li>
        {% endfor %}
    </ul>
{% endblock %}